<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Orders</title>

		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
		<link rel="stylesheet" href="https:////cdn.datatables.net/1.10.5/css/jquery.dataTables.min.css">		

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
		<script src="https://cdn.datatables.net/1.10.5/js/jquery.dataTables.min.js"></script>
	</head>
	
	<body>
		<div style="width: 1024px; margin: 0 auto; ">
			<input type="hidden" name="shop_id" value="1">
			<h1>Current Orders</h1>
			<br>
			<table id="data" class="table table-striped table-hover">
				<thead><tr><th>Customer</th>   <th>Order</th> <th>Status</th></tr></thead>
				<tbody><tr><td>John</td> <td>Cappaccino - Large (soy milk)</td><td><span class="label label-warning">5 minutes</span></td></tr>
				<tr><td>Amelia</td> <td>Double Expresso</td><td><span class="label label-warning">7 minutes</span></td></tr>
				<tr><td>Bob</td> <td>Hot Chocolate - Small</td><td><span class="label label-success">collected</span></td></tr></tbody>
			</table>
		</div>
	 
	</body>
</html>

<script type="text/javascript">
	$(document).ready(function(){
		var shopId = $("input[name='shop_id']").val();
		var table = $('#data').DataTable( {
       		"order": [[ 2, "asc" ]]
    	});

		$.post("http://extramegacool.com/quickstart.me/api_get_shop_info.php", {shop_id: shopId}, function(data){
			console.log(data);
			$('title').html("Orders for " + data.name);
			$('h1').html("Current Orders for " + data.name);

		}, "json").fail(function(){
			console.log("getting shop info failed");
		});

		$.post("http://extramegacool.com/quickstart.me/api_get_orders.php", {shop_id: shopId}, function(data){
			console.log(data);
		}, "json").fail(function(){
			console.log("fail");
		});


	});


	/*$(function worker(){
		// don't cache ajax or content won't be fresh
		$.ajaxSetup ({
			cache: false,
			type: 'GET',
	    	dataType: 'jsonp',
			complete: function() {
				// Schedule the next request when the current one's complete
				setTimeout(worker, 2000);
			}
	    });
	   
	    // load() functions
		var loadUrl = "./testData.html";
	    
		$("#data").load(loadUrl);

		// large suger free skinny late with two pumps instead of three and honey on top
	});*/
</script>